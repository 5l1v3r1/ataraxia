name=host-python
version=3.8.1
release=1
options=('bootstrap')
source=("https://www.python.org/ftp/python/${version%rc*}/Python-${version}.tar.xz")

build() {
	cd "$SRC"/Python-$version
	./configure \
		--prefix="$TOOLS" \
		--without-ensurepip
	make EXTRA_CFLAGS="$CFLAGS -DTHREAD_STACK_SIZE=0x100000"

	sed -i 's/^all:.*$/all: build_all/' Makefile
	make EXTRA_CFLAGS="$CFLAGS -DTHREAD_STACK_SIZE=0x100000" install
}
