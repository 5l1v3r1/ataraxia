# Description: Linux D-Bus Message Broker
# URL:         https://github.com/bus1/dbus-broker/wiki
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  meson expat

name=dbus-broker
version=21
release=1
source=("https://github.com/bus1/dbus-broker/releases/download/v$version/$name-$version.tar.xz")

build() {
	cd "$SRC"/$name-$version
	mkdir -p build
	cd build
	ataraxia-meson "$SRC"/$name-$version \
		-Dlauncher=false
	ninja
	DESTDIR="$PKG" ninja install

	ln -sf dbus-broker "$PKG"/usr/bin/dbus-daemon

	install -D -m755 "$STUFF"/svc/dbus.initd "$PKG"/etc/init.d/dbus
}
