# Description: Thunderbolt 3 device manager
# URL:         https://gitlab.freedesktop.org/bolt/bolt
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  meson pygobject eudev polkit
# Section:     admin

name=bolt
version=0.8
release=1
source=("https://gitlab.freedesktop.org/bolt/bolt/-/archive/$version/$name-$version.tar.gz")

build() {
	cd "$SRC"/$name-$version
	mkdir -p build
	cd build
	ataraxia-meson "$SRC"/$name-$version \
		-Dman=false \
		-Dsystemd=false
	ninja
	DESTDIR="$PKG" ninja install

	for rc in boltd; do
		install -Dm755 "$STUFF"/perpd/$rc "$PKG"/etc/perp/$rc/rc.main
		install -Dm755 "$STUFF"/perpd/log "$PKG"/etc/perp/$rc/rc.log
	done
}
