# Description: Command-line package manager used on Debian-based systems
# URL:         http://packages.debian.org
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  cmake ninja dpkg curl gnupg
# Section:     admin

name=apt
version=1.8.2
release=1
source=("http://ftp.debian.org/debian/pool/main/a/$name/${name}_${version}.tar.xz")

build() {
	cd "$SRC"/$name-$version
	patch -Np1 -i "$STUFF"/apt/nodocs.patch

	mkdir -p build
	cd build
	cmake "$SRC"/$name-$version \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=/usr/lib \
		-DCMAKE_BUILD_TYPE=MinSizeRel \
		-Wno-dev -G Ninja
	ninja
	DESTDIR="$PKG" ninja install

	echo "deb https://protonesso.moe/repo van main contrib non-free" >> "$PKG"/etc/apt/sources.list
}
