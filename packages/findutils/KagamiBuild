# Description: GNU utilities to locate files
# URL:         https://www.gnu.org/software/findutils/
# Maintainer:  nee-san, nagakamira at gmail dot com
# Depends on:  mlocate

name=findutils
version=4.6.0
release=1
options=('~makeflags')
source=("http://ftp.gnu.org/gnu/$name/$name-$version.tar.gz")
BOOTSTRAP=yes

build() {
	cd "$SRC"/$name-$version
	sed -i '/^SUBDIRS/s/locate//' Makefile.in

	if [ "$CROSS" = "yes" ]; then
cat > config.cache << EOF
gl_cv_func_wcwidth_works=yes
ac_cv_func_fnmatch_gnu=yes
EOF
		BUILDFLAGS="$BUILDFLAGS --cache-file=config.cache"
	fi

	./configure $BUILDFLAGS \
		--prefix=/usr \
		--libexecdir=/usr/lib \
		--without-python
	make -j1 -C locate dblocation.texi
	make -j1
	make -j1 DESTDIR="$PKG" install
}
