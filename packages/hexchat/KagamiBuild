# Description: A popular and easy to use graphical IRC (chat) client
# URL:         https://hexchat.github.io/
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  meson gtk2 lua libnotify libcanberra libproxy
# Section:     net

name=hexchat
version=2.14.3
release=1
source=("https://dl.hexchat.net/$name/$name-$version.tar.xz")

build() {
	cd "$SRC"/$name-$version

	# Remove firefox references
	sed -i '\|NAME Open Link| s|Firefox|Iceweasel|' src/common/hexchat.c
	sed -i '\|NAME Open Link| s|firefox -new-window %s\\n\\n";|iceweasel -new-window %s\\n\\n"\\\n		"NAME Open Link in a new Icecat Window\\n"		"CMD !icecat -new-window %s\\n\\n";|' src/common/hexchat.c

	mkdir -p build
	cd build

	ataraxia-meson "$SRC"/$name-$version
	ninja
	DESTDIR="$PKG" ninja install
}
